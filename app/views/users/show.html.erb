<section class="dashboard-main">
  <h2> <%= current_user.first_name %>'s Dashboard </h2>

  <%= button_to 'Log Out', logout_path, method: 'delete', class: "btn btn-primary mb1 bg-teal" %>
  <hr>
  <h3>Account Details</h3>
  <ul>
    <li><%= current_user.first_name  %> <%= current_user.last_name %></li>
    <li><%= current_user.email%></li>
    <li>Status: <%= active_user? ? 'Active' : 'Inactive'%></li>
  </ul>

  <% if active_user? %>
    <% if @user.has_bookmarks? %>
      <%= render partial: 'partials/dashboard/bookmarks', locals: {user: current_user} %>
    <% end %>
    <% if @user.has_friends? %>
      <%= render partial: 'partials/dashboard/friends', locals: {user: current_user} %>
    <% end %>
    <% if current_user.token %>
      <section class='github-info'>
        <h3>GitHub</h3>
        <hr>
        <%= render partial: 'partials/dashboard/repos', locals: {facade: @user} %>
        <%= render partial: 'partials/dashboard/follows', locals: {github_users: @user.followers, type: 'follower'} %>
        <%= render partial: 'partials/dashboard/follows', locals: {github_users: @user.following, type: 'following'} %>
      </section>
    <% else %>
      <p><%= link_to "Connect to GitHub", :github_auth %></p>
    <% end %>
  <% else %>
    <h3 style="color:red">This account has not yet been activated. Please check your email.</h3>
  <% end %>
</section>
